<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<title>Apple Catchers</title>
</head>
<body>

<!-- â•â•â• GAME â•â•â• -->
<div class="screen" id="sGame">
  <canvas id="cvs"></canvas>
  <div id="danger"></div>
  <div id="hud">
    <div class="pill"><div class="pill-coin"></div><span id="hudCoins">0</span></div>
    <span id="hudScore">Score: 0</span>
    <span id="hudTimer" style="display:none">2:00</span>
    <button id="btnShop">ğŸ›’ Shop</button>
    <button id="btnMusic">ğŸµ</button>
  </div>
  <div id="timerBar" style="width:100%"></div>
  <div id="toast"></div>
  <div id="powerBar">
    <div class="pw-slot empty" id="pwSlot0"><span id="pwIcon0"></span><span class="pw-slot-count" id="pwCount0"></span></div>
    <div class="pw-slot empty" id="pwSlot1"><span id="pwIcon1"></span><span class="pw-slot-count" id="pwCount1"></span></div>
    <div class="pw-slot empty" id="pwSlot2"><span id="pwIcon2"></span><span class="pw-slot-count" id="pwCount2"></span></div>
  </div>
</div>

<!-- WHAT'S NEW OVERLAY -->
<div id="updateOverlay">
  <div id="updateBox">
    <div class="up-title">ğŸ†• What's New</div>

    <div class="up-section">
      <div class="up-sec-title">ğŸ‘¤ Accounts</div>
      <div class="up-item">
        <div class="up-icon">âœï¸</div>
        <div>
          <div class="up-name">Sign Up & Log In</div>
          <div class="up-desc">Create an account with just a username and password! Your progress saves to the cloud so you never lose it.</div>
        </div>
      </div>
      <div class="up-item">
        <div class="up-icon">â˜ï¸</div>
        <div>
          <div class="up-name">Cloud Save</div>
          <div class="up-desc">All your coins, skins, maps, and power-ups sync to the cloud when logged in. Play on any device!</div>
        </div>
      </div>
    </div>

    <div class="up-section">
      <div class="up-sec-title">ğŸ† Global Leaderboard</div>
      <div class="up-item">
        <div class="up-icon">ğŸŒ</div>
        <div>
          <div class="up-name">Compete Worldwide</div>
          <div class="up-desc">See the top 50 scores from players around the world! Tabs for both Classic and Timer modes.</div>
        </div>
      </div>
      <div class="up-item">
        <div class="up-icon">ğŸ¥‡</div>
        <div>
          <div class="up-name">Best Score Only</div>
          <div class="up-desc">Only your highest score shows on the leaderboard. Beat your own record to climb higher!</div>
        </div>
      </div>
    </div>

    <button class="up-close">âœ• Close</button>
  </div>
</div>

<!-- â•â•â• MENU â•â•â• -->
<div class="screen off" id="sMenu">
  <div class="logo">ğŸ Apple Catchers</div>
    <div style="position:absolute;top:max(env(safe-area-inset-top,0px),14px);left:14px;color:rgba(255,255,255,.55);font-family:'Fredoka One',cursive;font-size:.72rem;pointer-events:none;">Update 1.4</div>
    <button id="btnUpdate" style="position:absolute;top:max(env(safe-area-inset-top,0px),14px);right:14px;background:rgba(255,214,0,.15);border:1.5px solid rgba(255,214,0,.4);border-radius:12px;padding:6px 11px;color:#ffd600;font-family:'Fredoka One',cursive;font-size:.72rem;cursor:pointer;">ğŸ†• Updates</button>
  <div id="menuUser" style="display:none" class="menu-user">Playing as <b id="menuUsername"></b></div>
  <div class="menu-coins"><div class="mc-coin"></div><span id="menuCoins">0</span></div>
  <div id="menuProgress" style="color:rgba(255,255,255,.55);font-size:.8rem;font-weight:700;text-align:center;"></div>
  <div class="mode-row">
    <button class="mode-btn active" id="btnModeClassic">ğŸ<br>Classic</button>
    <button class="mode-btn" id="btnModeTimer">â±ï¸<br>Timer</button>
  </div>
  <button class="big-btn btn-play" id="btnPlay">â–¶ Play</button>
  <button class="big-btn btn-shop-menu" id="btnMenuShop">ğŸ›’ Shop</button>
  <button class="big-btn btn-account" id="btnAccount">ğŸ‘¤ Account</button>
  <button class="big-btn btn-lb" id="btnLeaderboard">ğŸ† Leaderboard</button>
</div>

<!-- Fullscreen tap-to-start â€” the ONLY reliable cross-browser audio trigger -->
<div id="tapOverlay">
  <div id="tapBox">
    <div id="tapApple">ğŸ</div>
    <div id="tapTitle">Apple Catchers</div>
    <div id="tapBtn">â–¶ Tap to Play</div>
    <div id="tapSub">ğŸµ Music starts automatically</div>
  </div>
</div>

<!-- â•â•â• GAME OVER â•â•â• -->
<div class="screen off" id="sGameOver">
  <canvas id="goAppleCanvas" width="110" height="130"></canvas>
  <div class="go-title">Apple Dropped!</div>
  <div class="go-card">
    Score: <b id="goScore">0</b><br>
    Coins earned: <b id="goCoins">+0</b><br>
    <span class="go-penalty" id="goPenalty"></span>
  </div>
  <button class="big-btn btn-retry" id="btnRetry">ğŸ”„ Play Again</button>
  <button class="big-btn btn-menu2" id="btnGoMenu">ğŸ  Menu</button>
</div>

<!-- â•â•â• SHOP â•â•â• -->
<div class="screen off" id="sShop">
  <div class="shop-header">
    <div class="shop-title">ğŸ›’ Shop</div>
    <div class="shop-coins"><div class="sc-coin"></div><span id="shopCoins">0</span></div>
    <button class="btn-back" id="btnBack">â† Back</button>
  </div>
  <div class="shop-body">
    <div class="sec-title">ğŸ“¦ CHESTS</div>
    <div class="chest-grid" id="chestGrid"></div>
    <div class="sec-title">ğŸ APPLE SKINS</div>
    <div class="skin-grid" id="appleSkinGrid"></div>
    <div class="sec-title">ğŸ¥£ BOWL SKINS</div>
    <div class="skin-grid" id="bowlSkinGrid"></div>
    <div class="sec-title">âš¡ POWER-UPS</div>
    <div class="pu-grid" id="puGrid"></div>
    <div class="sec-title">ğŸ—ºï¸ MAP REWARDS</div>
    <div id="mapRewardsInfo" style="background:rgba(255,255,255,.06);border-radius:14px;padding:14px;margin-bottom:12px;">
      <div style="color:rgba(255,255,255,.7);font-size:.78rem;margin-bottom:8px;">Unlock maps to get exclusive rewards!</div>
      <div id="rewardsList"></div>
    </div>
    <div class="sec-title">ğŸ—ºï¸ MAPS</div>
    <div class="map-progress" id="mapProgress"></div>
    <div class="skin-grid" id="mapGrid"></div>
  </div>
</div>

<!-- â•â•â• TIMER END SCREEN â•â•â• -->
<div class="screen off" id="sTimerEnd">
  <div class="te-trophy">ğŸ†</div>
  <div class="te-title">Time's Up!</div>
  <div class="te-card">
    Caught: <b id="teCaught">0</b><br>
    Dropped: <span class="neg" id="teDropped">0</span><br>
    Final score: <b id="teScore">0</b><br>
    Coins earned: <b id="teCoins">+0</b>
  </div>
  <button class="big-btn btn-green" id="btnTimerRetry">ğŸ”„ Play Again</button>
  <button class="big-btn btn-grey" id="btnTimerMenu">ğŸ  Menu</button>
</div>

<!-- â•â•â• VICTORY SCREEN â•â•â• -->
<div class="screen off" id="sVictory">
  <div class="vc-trophy">ğŸ†</div>
  <div class="vc-title">You Beat It!</div>
  <div class="vc-sub">You've caught 500 apples, collected all maps,<br>and mastered Apple Catchers!</div>
  <div class="vc-card">
    Total caught: <b id="vcCaught">0</b><br>
    All maps: <b>âœ… Unlocked</b><br>
    Skins collected: <b id="vcSkins">0</b> / 16
  </div>
  <button class="big-btn btn-gold" id="btnVictoryCredits">ğŸ¬ See Credits</button>
  <button class="big-btn btn-grey" id="btnVictoryMenu">ğŸ  Menu</button>
</div>

<!-- â•â•â• CREDITS SCREEN â•â•â• -->
<div class="screen off" id="sCredits">
  <div id="creditsScroll">
    <div class="cr-spacer"></div>
    <div class="cr-logo">ğŸ Apple Catchers</div>
    <div class="cr-tagline">A game about apples. And bowls.</div>

    <div class="cr-divider">âœ¦ âœ¦ âœ¦</div>

    <div class="cr-role">Ideas</div>
    <div class="cr-name">Evan John</div>
    <div class="cr-name">James</div>
    <div class="cr-name">DJ</div>
    <div class="cr-name">Tinashe</div>
    <div class="cr-name">Charlie</div>

    <div class="cr-divider">âœ¦ âœ¦ âœ¦</div>

    <div class="cr-role">Timer Mode</div>
    <div class="cr-name">Charlie</div>

    <div class="cr-divider">âœ¦ âœ¦ âœ¦</div>

    <div class="cr-role">Bug Fixes</div>
    <div class="cr-name">Evan Bennett</div>

    <div class="cr-divider">âœ¦ âœ¦ âœ¦</div>

    <div class="cr-role">Development</div>
    <div class="cr-name">Evan Bennett</div>

    <div class="cr-divider">âœ¦ âœ¦ âœ¦</div>

    <div class="cr-role">Special Thanks</div>
    <div class="cr-name">Everyone who played ğŸ</div>

    <div class="cr-divider">Â· Â· Â·</div>

    <div class="cr-thanks">Thanks for playing!</div>
    <div class="cr-heart">â¤ï¸</div>

    <div class="cr-end-spacer"></div>
  </div>
  <button id="btnSkipCredits" style="position:fixed;bottom:max(env(safe-area-inset-bottom,0px),20px);left:50%;transform:translateX(-50%);background:rgba(255,255,255,.12);border:none;border-radius:20px;padding:10px 28px;color:rgba(255,255,255,.6);font-family:'Fredoka One',cursive;font-size:.9rem;cursor:pointer;z-index:10;">Skip â–¶</button>
</div>

<!-- â•â•â• ACCOUNT â•â•â• -->
<div class="screen off" id="sAccount">
  <div class="acc-title">ğŸ‘¤ Account</div>
  <div id="accLoggedOut">
    <input type="text" id="accUser" placeholder="Username" maxlength="15" autocomplete="off">
    <input type="password" id="accPass" placeholder="Password" maxlength="30">
    <div id="accError" class="acc-error"></div>
    <button class="big-btn btn-play" id="btnSignUp">âœï¸ Sign Up</button>
    <button class="big-btn btn-grey" id="btnLogIn">ğŸ”‘ Log In</button>
  </div>
  <div id="accLoggedIn" style="display:none">
    <div class="acc-welcome">Welcome, <b id="accName"></b>!</div>
    <button class="big-btn btn-grey" id="btnLogOut">ğŸ‘‹ Log Out</button>
  </div>
  <button class="big-btn btn-grey" id="btnAccBack">ğŸ  Menu</button>
</div>

<!-- â•â•â• LEADERBOARD â•â•â• -->
<div class="screen off" id="sLeaderboard">
  <div class="lb-header">
    <div class="lb-title">ğŸ† Leaderboard</div>
    <button class="btn-back" id="btnLbBack">â† Back</button>
  </div>
  <div class="lb-tabs">
    <button class="lb-tab active" id="lbTabClassic">ğŸ Classic</button>
    <button class="lb-tab" id="lbTabTimer">â±ï¸ Timer</button>
  </div>
  <div id="lbLoading" class="lb-loading">Loading...</div>
  <div class="lb-list" id="lbList"></div>
</div>

<!-- â•â•â• CHEST OPEN OVERLAY â•â•â• -->
<div id="chestOpen">
  <canvas id="chestOpenCanvas" width="140" height="140"></canvas>
  <canvas id="chestRevealCanvas" width="140" height="140" style="display:none"></canvas>
  <div class="chest-msg" id="chestMsg">Opening...</div>
  <div class="chest-sub" id="chestSub"></div>
  <button class="chest-close-btn" id="chestCloseBtn" style="display:none">Awesome! ğŸ‰</button>
</div>

<script type="module" src="/src/main.js"></script>
</body>
</html>
